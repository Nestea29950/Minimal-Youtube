function m(e){document.querySelectorAll('ytd-thumbnail-overlay-time-status-renderer[overlay-style="SHORTS"]').forEach(t=>{const c=t.closest("ytd-video-renderer");c&&c.classList.toggle("hide-recommandes",e)})}function d(){window.location.pathname.search("shorts")!==-1&&history.back()}function g(e){document.querySelectorAll("ytd-rich-section-renderer").forEach(t=>{t.querySelector('a[href*="/shorts/"]')&&t.classList.toggle("hide-recommandes",e)})}function h(e){document.querySelectorAll("ytd-reel-shelf-renderer").forEach(t=>{t.classList.toggle("hide-recommandes",e)})}function u(e){const o=[...document.querySelectorAll("a#endpoint")].find(t=>t.title==="Shorts");o&&o.classList.toggle("hide-recommandes",e)}function a(e){d(),m(e),g(e),h(e),u(e)}function f(e){const o=document.getElementById("comments");o&&o.classList.toggle("hide-recommandes",e)}function l(e){f(e)}function y(e){const o=document.getElementById("secondary");o&&o.classList.toggle("hide-recommandes",e)}function b(e){if(window.location.hostname==="www.youtube.com")if(window.location.pathname==="/"&&window.location.search===""){const o=document.getElementById("page-manager");o&&o.classList.toggle("hide-recommandes",e)}else document.getElementById("page-manager").classList.toggle("hide-recommandes",!1)}function i(e){y(e),b(e)}let n=!0,s=!0,r=!0;const S=new MutationObserver(()=>{a(n),l(r),i(s)});S.observe(document.body,{childList:!0,subtree:!0});chrome.storage.local.get(["shortsEnabled","recommandesEnabled","commentaireEnabled"],e=>{n=e.shortsEnabled??!0,s=e.recommandesEnabled??!0,r=e.commentaireEnabled??!0,a(n),l(r),i(s)});chrome.runtime.onMessage.addListener((e,o,t)=>{e.action==="shorts_toggle"&&(n=e.hide,chrome.storage.local.set({shortsEnabled:n}),a(n)),e.action==="commentaires_toggle"&&(r=e.hide,chrome.storage.local.set({commentaireEnabled:r}),l(r)),e.action==="recommandes_toggle"&&(s=e.hide,chrome.storage.local.set({recommandesEnabled:s}),i(s))});
